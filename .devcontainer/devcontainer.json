{
  "name": "Solarpunk Taskforce Dev",
  "image": "mcr.microsoft.com/devcontainers/typescript-node:22",
  "features": {
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/git:1": {
      "version": "os-provided",
      "installLFS": true
    }
  },
  "containerEnv": {
    "PNPM_ALLOW_SCRIPTS": "supabase"
  },
  "remoteEnv": {
    "PATH": "${containerEnv:PATH}:/home/node/.supabase/bin:/home/node/.local/bin"
  },
  "updateContentCommand": "set -e; corepack enable || true; corepack prepare pnpm@10.0.0 --activate || true; pnpm --version; pnpm install",
  "postCreateCommand": "set -e; mkdir -p /home/node/.supabase/bin; URL=\"$(curl -sH \"Authorization: Bearer ${GITHUB_TOKEN:-}\" https://api.github.com/repos/supabase/cli/releases/latest | grep -Eo '\"browser_download_url\":\\s*\"[^\\\"]+linux_amd64\\.tar\\.gz\"' | cut -d '\"' -f4 | head -n1)\"; if [ -z \"$URL\" ]; then URL=\"https://github.com/supabase/cli/releases/download/v2.48.3/supabase_2.48.3_linux_amd64.tar.gz\"; fi; curl -L \"$URL\" -o /tmp/supabase.tgz && tar -xzf /tmp/supabase.tgz -C /tmp && install -m 0755 /tmp/supabase /home/node/.supabase/bin/supabase || true; supabase --version || true; git lfs install --system || true; pnpm sb:sync || true",
  "postStartCommand": "bash -lc 'pgrep -f \"next dev\" >/dev/null || nohup pnpm dev >/tmp/next.log 2>&1 &'",
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-vscode.vscode-typescript-next",
        "bradlc.vscode-tailwindcss",
        "github.vscode-github-actions"
      ]
    }
  },
  "remoteUser": "node",
  "forwardPorts": [3000, 54321, 54322, 54323, 54324],
  "portsAttributes": {
    "3000": { "label": "Next.js", "onAutoForward": "openBrowser" }
  }
}